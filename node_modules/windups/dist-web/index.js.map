{"version":3,"file":"index.js","sources":["../dist-src/Windup.js","../dist-src/react/Pace.js","../dist-src/react/OnChar.js","../dist-src/react/useWindup.js","../dist-src/react/renderWindup.js","../dist-src/react/useWindupString.js","../dist-src/react/Pause.js","../dist-src/react/WindupChildren.js","../dist-src/react/CharWrapper.js","../dist-src/react/Linebreaker.js","../dist-src/react/Effect.js","../dist-src/react/textFromChildren.js"],"sourcesContent":["export function isPlayedWindup(windup) {\n    return windup.length === 2;\n}\nexport function memberIsWindup(member) {\n    // If it's not an array it can't be a windup\n    if (!Array.isArray(member)) {\n        return false;\n    }\n    // If it has less or more than three members it's not a windup\n    if (member.length !== 3) {\n        return false;\n    }\n    // If its first or second members are not arrays it's not a windup\n    if (!Array.isArray(member[0]) || !Array.isArray(member[1])) {\n        return false;\n    }\n    // Past here we just have to hope ElementType isn't a windup.\n    return true;\n}\nexport function windupFromString(str, metadata) {\n    return [[], str.split(\"\"), metadata];\n}\nexport function newWindup(arg, metadata) {\n    return [[], arg, metadata];\n}\nexport function isUnplayed(windup) {\n    const [played, remaining] = windup;\n    if (played.length > 0) {\n        return false;\n    }\n    return remaining.reduce((unplayed, member) => {\n        if (memberIsWindup(member))\n            if (memberIsWindup(windup) && unplayed) {\n                return isUnplayed(member);\n            }\n        return unplayed;\n    }, true);\n}\nexport function isFinished([_played, remaining,]) {\n    return remaining.length === 0;\n}\nexport function fastForward(windup) {\n    const forwardedWindup = next(windup);\n    if (isFinished(forwardedWindup)) {\n        return forwardedWindup;\n    }\n    return fastForward(forwardedWindup);\n}\nexport function rewind(windup) {\n    if (isUnplayed(windup)) {\n        return windup;\n    }\n    const [played, remaining, metadata] = windup;\n    const mapRewind = (member) => {\n        if (memberIsWindup(member)) {\n            return rewind(member);\n        }\n        return member;\n    };\n    return [\n        [],\n        [...played.map(mapRewind), ...remaining.map(mapRewind)],\n        metadata,\n    ];\n}\nexport function windupAsString(windup) {\n    const [played, remaining] = windup;\n    const stringify = (member) => {\n        if (memberIsWindup(member)) {\n            return windupAsString(member);\n        }\n        return member;\n    };\n    return [\n        played.map(stringify).join(\"\"),\n        remaining.map(stringify).join(\"\"),\n    ].join(\"\");\n}\nexport function lastPlayedMember([played, remaining,]) {\n    const playedFromRemaining = remaining.reduce((playedEl, member) => {\n        if (memberIsWindup(member)) {\n            if (!isUnplayed(member)) {\n                return lastPlayedElement(member);\n            }\n        }\n        return playedEl;\n    }, undefined);\n    if (playedFromRemaining) {\n        return playedFromRemaining;\n    }\n    const last = played[played.length - 1];\n    return last;\n}\nexport function lastPlayedElement(windup) {\n    const lastPlayed = lastPlayedMember(windup);\n    if (memberIsWindup(lastPlayed)) {\n        return lastPlayedElement(lastPlayed);\n    }\n    return lastPlayed;\n}\nexport function playedElements([played, remaining,]) {\n    const playedTransformed = played.map((member) => {\n        if (memberIsWindup(member)) {\n            const [_played, _remaining, metadata] = member;\n            return [playedElements(member), metadata];\n        }\n        return member;\n    });\n    const [firstRemaning] = remaining;\n    if (memberIsWindup(firstRemaning) && !isUnplayed(firstRemaning)) {\n        const [_playedRemaining, _remaining, metadata] = firstRemaning;\n        return [\n            ...playedTransformed,\n            [playedElements(firstRemaning), metadata],\n        ];\n    }\n    return playedTransformed;\n}\nexport function nextElement([_played, remaining,]) {\n    const [nextVal] = remaining;\n    if (memberIsWindup(nextVal)) {\n        return nextElement(nextVal);\n    }\n    return nextVal;\n}\nexport function next(windup) {\n    // start\n    // [[], [[[], [\"h\", \"i\"]], [[], [\"n\", \"o\"]]]]\n    // next\n    // [[], [[[\"h\"], [\"i\"]], [\"\", [\"n\", \"o\"]]]]\n    // next\n    // [[\"h\", \"i\"], [[\"n\", \"o\"]]]\n    // next\n    // [[\"h\", \"i\"] [\"n\", \"o\"]], []]\n    if (isFinished(windup)) {\n        return windup;\n    }\n    const [played, remaining, metadata] = windup;\n    const [firstRemaining, ...restRemaining] = remaining;\n    if (memberIsWindup(firstRemaining)) {\n        const nextFirstRemaining = next(firstRemaining);\n        if (isFinished(nextFirstRemaining)) {\n            return [[...played, nextFirstRemaining], restRemaining, metadata];\n        }\n        return [played, [nextFirstRemaining, ...restRemaining], metadata];\n    }\n    return [[...played, firstRemaining], restRemaining, metadata];\n}\n","import React from \"react\";\nimport { isFinished, memberIsWindup } from \"../Windup\";\nexport function defaultGetPace(lastChar, nextChar) {\n    switch (lastChar) {\n        case \"—\":\n        case \"…\":\n            return 200;\n        case \".\":\n        case \",\":\n            return 150;\n        case \"?\":\n        case \"!\":\n            if (nextChar !== \"!\" && nextChar !== \"?\") {\n                return 150;\n            }\n        case \"-\":\n        case \" \":\n        case \"\\n\":\n            return 0;\n        default:\n            return 20;\n    }\n}\nconst Pace = ({ children }) => {\n    return React.createElement(React.Fragment, null, children);\n};\nexport function isPaceElement(element) {\n    return element.type === Pace;\n}\nexport function isMsProp(props) {\n    if (\"ms\" in props) {\n        return true;\n    }\n    return false;\n}\nexport function paceFromWindup(windup) {\n    if (isFinished(windup)) {\n        return undefined;\n    }\n    const [_played, remaining, metadata] = windup;\n    const [firstRemaining] = remaining;\n    if (firstRemaining && memberIsWindup(firstRemaining)) {\n        return paceFromWindup(firstRemaining);\n    }\n    return metadata.pace;\n}\nexport default Pace;\n","import React from \"react\";\nimport { memberIsWindup, lastPlayedMember, isUnplayed } from \"../Windup\";\nconst OnChar = ({ children }) => {\n    return React.createElement(React.Fragment, null, children);\n};\nexport function isOnCharElement(element) {\n    return element.type === OnChar;\n}\n// Should return onChars from\n// every just played member that is a windup\n// any first remaining that is played\nexport function onCharsFromWindup(windup) {\n    const [_played, remaining, metadata] = windup;\n    const lastPlayed = lastPlayedMember(windup);\n    const [firstRemaining] = remaining;\n    let onChars = [];\n    if (lastPlayed && memberIsWindup(lastPlayed)) {\n        onChars.push(...onCharsFromWindup(lastPlayed));\n    }\n    if (firstRemaining &&\n        memberIsWindup(firstRemaining) &&\n        !isUnplayed(firstRemaining)) {\n        onChars.push(...onCharsFromWindup(firstRemaining));\n    }\n    if (metadata.onChar) {\n        onChars.push(metadata.onChar);\n    }\n    return onChars;\n}\nexport default OnChar;\n","import { useRef, useEffect, useCallback, useReducer } from \"react\";\nimport { defaultGetPace, paceFromWindup } from \"./Pace\";\nimport { isFinished, lastPlayedElement, next, fastForward, rewind, nextElement, } from \"../Windup\";\nimport { onCharsFromWindup } from \"./OnChar\";\nfunction initWindupState(windup) {\n    return { windup, didFinishOnce: false };\n}\nfunction windupReducer(state, action) {\n    switch (action.type) {\n        case \"replace\":\n            return initWindupState(action.windup);\n        case \"next\":\n            return { ...state, windup: next(state.windup) };\n        case \"rewind\":\n            return { windup: rewind(state.windup), didFinishOnce: false };\n        case \"fast-forward\":\n            return { ...state, windup: fastForward(state.windup) };\n        case \"finish\":\n            return { ...state, didFinishOnce: true };\n        default:\n            return state;\n    }\n}\nexport default function useWindup(windupInit, options) {\n    const [{ windup, didFinishOnce }, dispatch] = useReducer(windupReducer, windupInit, initWindupState);\n    const timeoutRef = useRef(null);\n    const windupIsFinished = isFinished(windup);\n    const skip = useCallback(() => {\n        if (!windupIsFinished) {\n            if (timeoutRef.current) {\n                clearTimeout(timeoutRef.current);\n            }\n            dispatch({\n                type: \"fast-forward\",\n            });\n        }\n    }, [windupIsFinished]);\n    const rewind = useCallback(() => {\n        if (timeoutRef.current) {\n            clearTimeout(timeoutRef.current);\n        }\n        dispatch({ type: \"rewind\" });\n    }, []);\n    // If windup arg changes, we should reset\n    useEffect(() => {\n        dispatch({ type: \"replace\", windup: windupInit });\n    }, [windupInit]);\n    // If skipped is changes to true, we should skip\n    // And if it's changed to false, we should restart\n    useEffect(() => {\n        if (timeoutRef.current) {\n            clearTimeout(timeoutRef.current);\n        }\n        if (options.skipped) {\n            dispatch({\n                type: \"fast-forward\",\n            });\n        }\n        if (options.skipped === false) {\n            dispatch({ type: \"rewind\" });\n        }\n    }, [options.skipped]);\n    // When the windup changes, onChar should fire\n    useEffect(() => {\n        const onChars = onCharsFromWindup(windup);\n        const lastEl = lastPlayedElement(windup);\n        if (onChars.length > 0 && lastEl) {\n            onChars.forEach((onChar) => {\n                onChar(lastEl);\n            });\n        }\n    }, [windup]);\n    // If windup finishes, the onFinished should fire\n    useEffect(() => {\n        // Put this in a new context so that the windup finishes visually before firing this\n        if (didFinishOnce === false && windupIsFinished) {\n            const timeout = setTimeout(() => {\n                if (options.onFinished) {\n                    options.onFinished();\n                }\n                dispatch({ type: \"finish\" });\n            }, 0);\n            return () => {\n                clearTimeout(timeout);\n            };\n        }\n    }, [didFinishOnce, windupIsFinished, options]);\n    // the windup effect itself\n    useEffect(() => {\n        if (!windupIsFinished) {\n            const getPace = paceFromWindup(windup) || defaultGetPace;\n            const lastEl = lastPlayedElement(windup);\n            const nextEl = nextElement(windup);\n            timeoutRef.current = setTimeout(() => {\n                dispatch({ type: \"next\" });\n            }, lastEl ? getPace(lastEl, nextEl) : 0);\n            return () => {\n                if (timeoutRef.current) {\n                    clearTimeout(timeoutRef.current);\n                }\n            };\n        }\n    }, [windup, windupIsFinished]);\n    return {\n        windup,\n        skip,\n        rewind,\n        isFinished: windupIsFinished,\n    };\n}\n","import React from \"react\";\nimport { playedElements, isPlayedWindup } from \"../Windup\";\nexport function renderStringWindup(windup) {\n    const played = isPlayedWindup(windup) ? windup[0] : playedElements(windup);\n    const inner = played.reduce((acc, playedEl) => {\n        if (typeof playedEl === \"string\") {\n            return acc + playedEl;\n        }\n        return acc + renderStringWindup(playedEl);\n    }, \"\");\n    return inner;\n}\nconst VOID_TAGS = [\n    \"area\",\n    \"base\",\n    \"br\",\n    \"col\",\n    \"command\",\n    \"embed\",\n    \"hr\",\n    \"img\",\n    \"input\",\n    \"keygen\",\n    \"link\",\n    \"meta\",\n    \"param\",\n    \"source\",\n    \"track\",\n    \"wbr\"\n];\nexport function renderChildrenWindup(windup) {\n    const metadata = isPlayedWindup(windup) ? windup[1] : windup[2];\n    const played = isPlayedWindup(windup) ? windup[0] : playedElements(windup);\n    const Outer = metadata.element || React.Fragment;\n    if (metadata.props && Object.keys(metadata.props).includes(\"children\")) {\n        return React.createElement(Outer, Object.assign({}, metadata.props));\n    }\n    const inner = played.reduce((acc, playedEl) => {\n        if (typeof playedEl === \"string\") {\n            const accButLast = acc.slice(0, acc.length - 1);\n            const last = acc[acc.length - 1];\n            return last && typeof last === \"string\"\n                ? [...accButLast, last + playedEl]\n                : [...acc, playedEl];\n        }\n        return [...acc, renderChildrenWindup(playedEl)];\n    }, []);\n    if (typeof metadata.element === \"string\" &&\n        VOID_TAGS.includes(metadata.element)) {\n        return React.createElement(Outer, Object.assign({ key: metadata.key }, metadata.props));\n    }\n    return (React.createElement(Outer, Object.assign({ key: metadata.key }, metadata.props), inner));\n}\n","import { useMemo } from \"react\";\nimport { windupFromString } from \"../Windup\";\nimport useWindup from \"./useWindup\";\nimport { renderStringWindup } from \"./renderWindup\";\nexport default function useWindupString(text, options = {}) {\n    const windupInit = useMemo(() => {\n        return windupFromString(text, options);\n    }, [text]);\n    const { windup, skip, rewind, isFinished } = useWindup(windupInit, options);\n    return [renderStringWindup(windup), { skip, rewind, isFinished }];\n}\n","const Pause = ({}) => {\n    return null;\n};\nexport function isPauseElement(element) {\n    return element.type === Pause;\n}\nexport default Pause;\n","import React, { useContext, useMemo } from \"react\";\nimport { newWindup, windupFromString, memberIsWindup } from \"../Windup\";\nimport { isPaceElement, isMsProp } from \"./Pace\";\nimport { isOnCharElement } from \"./OnChar\";\nimport { isPauseElement } from \"./Pause\";\nimport useWindup from \"./useWindup\";\nimport { renderChildrenWindup } from \"./renderWindup\";\nconst WindupContext = React.createContext({\n    skip: () => {\n        console.warn(\"Tried to use the useSkip hook outside of a WindupChildren component!!\");\n    },\n    rewind: () => {\n        console.warn(\"Tried to use the useRewind hook outside of a WindupChildren component!\");\n    },\n    isFinished: false\n});\nexport function useSkip() {\n    const { skip } = useContext(WindupContext);\n    return skip;\n}\nexport function useRewind() {\n    const { rewind } = useContext(WindupContext);\n    return rewind;\n}\nexport function useIsFinished() {\n    const { isFinished } = useContext(WindupContext);\n    return isFinished;\n}\nfunction reduceWindupArgs(prevArgs, children) {\n    if (typeof children === \"string\") {\n        return [...prevArgs, ...children.split(\"\")];\n    }\n    if (typeof children === \"number\") {\n        return [...prevArgs, ...children.toString().split(\"\")];\n    }\n    if (!React.isValidElement(children)) {\n        return prevArgs;\n    }\n    const { children: childrenChildren, ...restProps } = children.props;\n    const paceMetaData = isPaceElement(children)\n        ? {\n            pace: (char) => {\n                if (isMsProp(children.props)) {\n                    return children.props.ms;\n                }\n                return children.props.getPace(char);\n            }\n        }\n        : {};\n    const onCharMetaData = isOnCharElement(children)\n        ? {\n            onChar: children.props.fn\n        }\n        : {};\n    const keyProp = children.key ? { key: children.key } : {};\n    if (isPauseElement(children)) {\n        return [\n            ...prevArgs,\n            windupFromString(\" \", {\n                element: React.Fragment,\n                ...keyProp,\n                props: {},\n                pace: () => children.props.ms\n            })\n        ];\n    }\n    if (childrenChildren === undefined) {\n        return [\n            ...prevArgs,\n            windupFromString(\" \", {\n                element: children.type,\n                props: restProps,\n                ...keyProp,\n                ...paceMetaData,\n                ...onCharMetaData\n            })\n        ];\n    }\n    if (typeof childrenChildren === \"string\") {\n        return [\n            ...prevArgs,\n            windupFromString(childrenChildren, {\n                element: children.type,\n                props: restProps,\n                ...keyProp,\n                ...paceMetaData,\n                ...onCharMetaData\n            })\n        ];\n    }\n    if (childrenChildren instanceof Function) {\n        return [\n            ...prevArgs,\n            windupFromString(\" \", {\n                element: children.type,\n                props: { children: childrenChildren, ...restProps },\n                ...keyProp,\n                ...paceMetaData,\n                ...onCharMetaData\n            })\n        ];\n    }\n    const newArgs = React.Children.toArray(childrenChildren).reduce(reduceWindupArgs, []);\n    const argsWithMetadata = newArgs.map(member => {\n        if (memberIsWindup(member)) {\n            const [played, remaining, metadata] = member;\n            return [\n                played,\n                remaining,\n                {\n                    ...paceMetaData,\n                    ...onCharMetaData,\n                    ...metadata\n                }\n            ];\n        }\n        return member;\n    });\n    return [\n        ...prevArgs,\n        newWindup(argsWithMetadata, {\n            element: children.type,\n            props: restProps,\n            ...keyProp,\n            ...paceMetaData,\n            ...onCharMetaData\n        })\n    ];\n}\nfunction buildKeyString(children) {\n    if (children === null || children === undefined) {\n        return \"\";\n    }\n    return React.Children.map(children, child => {\n        if (typeof child === \"string\") {\n            return child;\n        }\n        if (typeof child === \"number\") {\n            return child.toString();\n        }\n        if (React.isValidElement(child)) {\n            return `#${child.key || \"\"}<${buildKeyString(child.props.children)}>`;\n        }\n        return \"\";\n    }).join(\",\");\n}\nfunction useChildrenMemo(factory, children) {\n    const memoChildren = useMemo(factory, [buildKeyString(children)]);\n    return memoChildren;\n}\nconst WindupChildren = ({ children, onFinished, skipped }) => {\n    const windupInit = useChildrenMemo(() => {\n        return newWindup(React.Children.toArray(children).reduce(reduceWindupArgs, []), { element: undefined });\n    }, children);\n    const { windup, skip, rewind, isFinished } = useWindup(windupInit, {\n        onFinished,\n        skipped\n    });\n    return (React.createElement(WindupContext.Provider, { value: {\n            skip,\n            rewind,\n            isFinished\n        } }, renderChildrenWindup(windup)));\n};\nexport default WindupChildren;\n","import React from \"react\";\nfunction wrapChildren(children, Wrapper) {\n    if (typeof children === \"string\") {\n        return children\n            .split(\"\")\n            .map((char, i) => char === \"\\n\" ? char : React.createElement(Wrapper, { key: `${char}-${i}` }, char));\n    }\n    if (typeof children === \"number\") {\n        return children\n            .toString()\n            .split(\"\")\n            .map(char => React.createElement(Wrapper, null, char));\n    }\n    if (!React.isValidElement(children)) {\n        return React.createElement(React.Fragment, null);\n    }\n    if (children.props.children) {\n        const Outer = children.type;\n        if (children.props.children instanceof Function) {\n            return React.createElement(Outer, Object.assign({ key: children.key }, children.props));\n        }\n        return (React.createElement(Outer, Object.assign({ key: children.key }, children.props), React.Children.map(children.props.children, ch => {\n            return wrapChildren(ch, Wrapper);\n        })));\n    }\n    return children;\n}\nconst CharWrapper = ({ children, element }) => {\n    return (React.createElement(React.Fragment, null, React.Children.map(children, ch => {\n        return wrapChildren(ch, element);\n    })));\n};\nexport default CharWrapper;\n","import React from \"react\";\nimport breakLines from \"break-styled-lines\";\nfunction getStringsOfReactChildren(strings, children) {\n    if (typeof children === \"string\") {\n        return [...strings, children];\n    }\n    if (typeof children === \"number\") {\n        return [...strings, children.toString()];\n    }\n    if (!React.isValidElement(children)) {\n        return strings;\n    }\n    return [\n        ...strings,\n        ...React.Children.toArray(children.props.children).reduce(getStringsOfReactChildren, [])\n    ];\n}\nfunction reinsertStringsIntoChildren([accChildren, accStrings], children) {\n    if (typeof children === \"string\" || typeof children === \"number\") {\n        const [firstString, ...restStrings] = accStrings;\n        return [[...accChildren, firstString], restStrings];\n    }\n    if (!React.isValidElement(children)) {\n        return [accChildren, accStrings];\n    }\n    const [subChildrenAcc, subStringsAcc] = React.Children.toArray(children.props.children).reduce(reinsertStringsIntoChildren, [[], accStrings]);\n    return [\n        [\n            ...accChildren,\n            React.cloneElement(children, {\n                children: subChildrenAcc\n            })\n        ],\n        subStringsAcc\n    ];\n}\nconst Linebreaker = ({ children, fontStyle, width }) => {\n    // CAVEATS:\n    // fontStyle must match the font style of the characters inside\n    // non-character elements must not add width to the line.\n    // must be used OUTSIDE of WindupChildren component\n    const childrenArray = React.Children.toArray(children);\n    const strings = childrenArray.reduce(getStringsOfReactChildren, []);\n    const transformedStrings = breakLines(strings, width, fontStyle);\n    const [transformedChildren] = childrenArray.reduce(reinsertStringsIntoChildren, [\n        [],\n        transformedStrings\n    ]);\n    return React.createElement(\"div\", { style: { whiteSpace: \"pre\" } }, transformedChildren);\n};\nexport default Linebreaker;\n","import { useEffect } from \"react\";\nconst Effect = ({ fn }) => {\n    useEffect(() => {\n        fn();\n    }, []);\n    return null;\n};\nexport default Effect;\n","import React, { isValidElement } from \"react\";\nexport default function textFromChildren(children) {\n    return React.Children.map(children, (ch) => {\n        if (typeof ch === \"string\") {\n            return ch;\n        }\n        if (typeof ch === \"number\") {\n            return ch.toString();\n        }\n        if (!isValidElement(ch)) {\n            return \"\";\n        }\n        if (ch.props.children) {\n            return textFromChildren(ch.props.children);\n        }\n        return \"\";\n    }).join(\"\");\n}\n"],"names":[],"mappings":"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"}